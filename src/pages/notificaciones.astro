---
import Navigation from '../components/Navigation.jsx';
import Layout from '../layouts/Layout.astro';
---
<Layout title="Notificaciones - Historial">
  <Navigation currentPath="/notificaciones" client:load />

  <main class="max-w-7xl mx-auto px-4 py-8">
    <div class="mb-8">
      <h1 class="text-3xl font-bold text-gray-900 mb-4">
        Historial de Notificaciones
      </h1>
      <p class="text-lg text-gray-600">
        Revisa el estado de todas las notificaciones enviadas
      </p>
    </div>

    <div class="bg-white rounded-lg shadow-sm">
      <!-- Filters -->
      <div class="p-6 border-b border-gray-200">
        <div class="flex flex-col md:flex-row gap-4 items-center">
          <select id="filter-status" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
            <option value="">Todos los estados</option>
            <option value="enviado">Enviado</option>
            <option value="entregado">Entregado</option>
            <option value="leido">Le√≠do</option>
            <option value="error">Error</option>
          </select>

          <select id="filter-type" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
            <option value="">Todos los tipos</option>
            <option value="email">Email</option>
            <option value="whatsapp">WhatsApp</option>
            <option value="sms">SMS</option>
          </select>

          <input id="filter-date" type="date" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" />

          <div class="flex-1">
            <input id="filter-search" type="search" placeholder="Buscar por nombre, email o tel√©fono" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" />
          </div>

          <button id="clear-filters" class="px-4 py-2 bg-gray-100 border border-gray-200 rounded-lg hover:bg-gray-50">Limpiar</button>
        </div>
      </div>

      <!-- Notifications List -->
      <div class="divide-y divide-gray-200">
        <!-- Item 1 -->
        <div class="p-6 hover:bg-gray-50">
          <div class="flex items-center justify-between">
            <div class="flex items-center">
              <div class="flex-shrink-0">
                <div class="w-3 h-3 bg-green-500 rounded-full" aria-hidden="true"></div>
              </div>
              <div class="ml-4">
                <div class="flex items-center">
                  <h3 class="text-sm font-medium text-gray-900">Mar√≠a Gonz√°lez</h3>
                  <span class="ml-2 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">üìß Email</span>
                </div>
                <p class="text-sm text-gray-600 mt-1">Bater√≠a 36V disponible para recoger</p>
                <p class="text-xs text-gray-500 mt-1">Enviado hace 2 horas ‚Ä¢ maria.gonzalez@email.com</p>
              </div>
            </div>
            <div class="flex items-center">
              <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">Entregado</span>
            </div>
          </div>
        </div>

        <!-- Item 2 -->
        <div class="p-6 hover:bg-gray-50">
          <div class="flex items-center justify-between">
            <div class="flex items-center">
              <div class="flex-shrink-0">
                <div class="w-3 h-3 bg-blue-500 rounded-full" aria-hidden="true"></div>
              </div>
              <div class="ml-4">
                <div class="flex items-center">
                  <h3 class="text-sm font-medium text-gray-900">Carlos Ruiz</h3>
                  <span class="ml-2 px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">üì± WhatsApp</span>
                </div>
                <p class="text-sm text-gray-600 mt-1">Motor 3000W llegar√° ma√±ana al taller</p>
                <p class="text-xs text-gray-500 mt-1">Enviado hace 1 d√≠a ‚Ä¢ +57 301 234 5678</p>
              </div>
            </div>
            <div class="flex items-center">
              <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">Enviado</span>
            </div>
          </div>
        </div>

        <!-- Item 3 -->
        <div class="p-6 hover:bg-gray-50">
          <div class="flex items-center justify-between">
            <div class="flex items-center">
              <div class="flex-shrink-0">
                <div class="w-3 h-3 bg-green-500 rounded-full" aria-hidden="true"></div>
              </div>
              <div class="ml-4">
                <div class="flex items-center">
                  <h3 class="text-sm font-medium text-gray-900">Ana Mart√≠nez</h3>
                  <span class="ml-2 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">üìß Email</span>
                </div>
                <p class="text-sm text-gray-600 mt-1">Ruedas 90mm (x4) disponibles para recoger</p>
                <p class="text-xs text-gray-500 mt-1">Enviado hace 3 d√≠as ‚Ä¢ ana.martinez@email.com</p>
              </div>
            </div>
            <div class="flex items-center">
              <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">Le√≠do</span>
            </div>
          </div>
        </div>

        <!-- Item 4: error example -->
        <div class="p-6 hover:bg-gray-50">
          <div class="flex items-center justify-between">
            <div class="flex items-center">
              <div class="flex-shrink-0">
                <div class="w-3 h-3 bg-red-500 rounded-full" aria-hidden="true"></div>
              </div>
              <div class="ml-4">
                <div class="flex items-center">
                  <h3 class="text-sm font-medium text-gray-900">Taller El√©ctrico S.A.</h3>
                  <span class="ml-2 px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full">üì© SMS</span>
                </div>
                <p class="text-sm text-gray-600 mt-1">Falla en env√≠o de notificaci√≥n: n√∫mero inv√°lido</p>
                <p class="text-xs text-gray-500 mt-1">Intentado hace 5 horas ‚Ä¢ +57 300 000 0000</p>
              </div>
            </div>
            <div class="flex items-center">
              <span class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full">Error</span>
            </div>
          </div>
        </div>

        <!-- More items... (puedes mapear desde tu backend aqu√≠) -->
      </div>

      <!-- Footer / Pagination -->
      <div class="p-4 border-t border-gray-200 flex items-center justify-between">
        <p class="text-sm text-gray-500">Mostrando 1-4 de 124 notificaciones</p>
        <div class="flex items-center gap-2">
          <button class="px-3 py-1 border border-gray-200 rounded-md hover:bg-gray-50" aria-label="Anterior">Anterior</button>
          <button class="px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700">1</button>
          <button class="px-3 py-1 border border-gray-200 rounded-md hover:bg-gray-50">2</button>
          <button class="px-3 py-1 border border-gray-200 rounded-md hover:bg-gray-50">3</button>
          <button class="px-3 py-1 border border-gray-200 rounded-md hover:bg-gray-50" aria-label="Siguiente">Siguiente</button>
        </div>
      </div>
    </div>

    <!-- Empty state example (hidden by default; muestra cuando no hay resultados) -->
    <div id="empty-state" class="mt-8 hidden text-center text-gray-600">
      <p class="text-lg font-medium">No se encontraron notificaciones</p>
      <p class="text-sm mt-2">Prueba quitar los filtros o cambia la fecha.</p>
    </div>
  </main>
</Layout>
